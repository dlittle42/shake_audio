{"version":3,"sources":["../../app/scripts/main.js"],"names":[],"mappings":"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","file":"main.js","sourcesContent":["//UberViz Main v0.1\n//Handles HTML and wiring data\n//Using Three v60\n\nvar events;// = new Events();\nvar simplexNoise;// = new SimplexNoise();\n\n// add Fastclick\nif ('addEventListener' in document) {\n\t    document.addEventListener('DOMContentLoaded', function() {\n\t        FastClick.attach(document.body);\n\t    }, false);\n\t}\n\n\n\n\n\n\n\n//MAIN RMP\nvar UberVizMain = function() {\n\n\t//var ATUtil;\n\n\tvar stats;\n\tvar windowHalfX;\n\tvar windowHalfY;\n\n\tfunction init() {\n\n\n\t\tif(!Detector.webgl){\n\t\t\tDetector.addGetWebGLMessage();\n\t\t}\n\n\t\t//INIT DOCUMENT\n\t\tdocument.onselectstart = function() {\n\t\t\treturn false;\n\t\t};\n\n\t\tdocument.addEventListener('mousemove', onDocumentMouseMove, false);\n\t\tdocument.addEventListener('mousedown', onDocumentMouseDown, false);\n\t\tdocument.addEventListener('mouseup', onDocumentMouseUp, false);\n\t//\tdocument.addEventListener('drop', onDocumentDrop, false);\n\t\tdocument.addEventListener('dragover', onDocumentDragOver, false);\n\t\twindow.addEventListener('resize', onResize, false);\n\t\twindow.addEventListener('keydown', onKeyDown, false);\n\t\twindow.addEventListener('keyup', onKeyUp, false);\n\n\t\t//STATS\n\t\tstats = new Stats();\n\t\t$('#controls').append(stats.domElement);\n\t\tstats.domElement.id = \"stats\";\n\n\t\t//INIT HANDLERS\n\t\tAudioHandler.init();\n\t\t//ControlsHandler.init();\n\t\tVizHandler.init();\n\t\tFXHandler.init();\n\n\t\tonResize();\n\n/*\n\t\tif (ControlsHandler.vizParams.showControls){\n\t\t\t$('#controls').show();\n\t\t}\n*/\n\t\tupdate();\n\n\t\t//on android setup first touch to request fullscreen\n\t\t// var isMobile = !!('ontouchstart' in window);\n\t\t// if (isMobile){\n\t\t// \t$('body').click(function(){\n\t\t// \t\t$('body')[0].webkitRequestFullscreen();\n\t\t// \t});\n\t\t// }\n\n\t}\n\n\tfunction update() {\n\t\trequestAnimationFrame(update);\n\t\tstats.update();\n\t\tevents.emit(\"update\");\n\t}\n\n\n\tfunction onDocumentDragOver(evt) {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\treturn false;\n\t}\n\n\t//load dropped MP3\n\tfunction onDocumentDrop(evt) {\n\t\tevt.stopPropagation();\n\t\tevt.preventDefault();\n\t\t//AudioHandler.onMP3Drop(evt);\n\t}\n\n\tfunction onKeyDown(event) {\n\t\tswitch ( event.keyCode ) {\n\t\t\tcase 32: /* space */\n\t\t\t\t//AudioHandler.onTap();\n\t\t\t\tVizHandler.setBeat(Math.random()+.1);\n\t\t\t\tbreak;\n\t\t\tcase 81: /* q */\n\t\t\t\t//toggleControls();\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tfunction onKeyUp(event) {\n\t}\n\n\tfunction onDocumentMouseDown(event) {\n\t}\n\n\tfunction onDocumentMouseUp(event) {\n\t}\n\n\tfunction onDocumentMouseMove(event) {\n\t\t// mouseX = (event.clientX - windowHalfX) / (windowHalfX);\n\t\t// mouseY = (event.clientY - windowHalfY) / (windowHalfY);\n\t}\n\n\tfunction onResize() {\n\t\t//windowHalfX = window.innerWidth / 2;\n\t\t//windowHalfY = window.innerHeight / 2;\n\t\tVizHandler.onResize();\n\t}\n\n\tfunction trace(text){\n\t\t$(\"#debugText\").text(text);\n\t}\n\n\tfunction setBeat(num){\n\t\tVizHandler.setBeat(Math.random()+.1);\n\t}\n\n/*\n\tfunction toggleControls(){\n\t\tControlsHandler.vizParams.showControls = !ControlsHandler.vizParams.showControls;\n\t\t$('#controls').toggle();\n\t\tVizHandler.onResize();\n\t}\n*/\n\n\tfunction reorient(e) {\n\t    var portrait = (window.orientation % 180 == 0);\n\t   // $(\"body > div\").css(\"-webkit-transform\", !portrait ? \"rotate(0deg)\" : \"\");\n\t}\n\twindow.onorientationchange = reorient;\n\twindow.setTimeout(reorient, 0);\n\n\n\treturn {\n\t\tinit:init,\n\t\tsetBeat: setBeat,\n\t\ttrace: trace\n\t};\n\n}();\n\n$(document).ready(function() {\n\n\t//GLOBAL\nevents = new Events();\nsimplexNoise = new SimplexNoise();\n\n\n\tUberVizMain.init();\n\n\t// create our AudioContext and osc Nodes\n\tvar audioContext, osc, gain, x, y;\n\tvar ready=null;\n\tvar myShakeEvent;\n\tvar clap, kick, low, snare;\n\n\tconsole.log(\"loaded\");\n\t$('#status').text('loaded');\n\n//\t$('.trigger').bind('touchstart', function(){\n\n\t$('.trigger').hide();\n\n\t$('#playBtn').on('click', function(){\n\t\t$('#playBtn').remove();\n\t\tactivateTrigger();\n\n\t});\n\n\tfunction activateTrigger(){\n\n\t\t$('.trigger').show();\n\t\t$('body').bind('touchstart', function(){\n\t\t   // $(this).addClass('recording');\n\t\t     $('.trigger').addClass('recording');\n\n\t\t    if (ready != \"shake\" ){\n\t\t  \t\tactivateShakeSound();\n\t\t\t}else{\n\t\t\t\t myShakeEvent.start();\n\t\t\t}\n\t\t\t$('#status').text('Touch Shake');\n\t\t\n\n\n\t\t}).bind('touchend', function(){\n\t\t    //$(this).removeClass('recording');\n\t\t    $('.trigger').removeClass('recording');\n\t\t  //  stopShakeSound();\n\t\t    myShakeEvent.stop();\n\t\t    $('#status').text('Touch Shake Stop');\n\t\t});\n\t}\n\n/*\n\n\t$('body').bind('touchstart', function(){\n\t   // $(this).addClass('recording');\n\t     $('.trigger').addClass('recording');\n\n\t    if (ready != \"shake\" ){\n\t  \t\tactivateShakeSound();\n\t\t}else{\n\t\t\t myShakeEvent.start();\n\t\t}\n\t\t$('#status').text('Touch Shake');\n\t\n\n\n\t}).bind('touchend', function(){\n\t    //$(this).removeClass('recording');\n\t    $('.trigger').removeClass('recording');\n\t  //  stopShakeSound();\n\t    myShakeEvent.stop();\n\t    $('#status').text('Touch Shake Stop');\n\t});\n\t*/\n/*\n\tvar drumMaster = new Howl({\n\t  urls: ['audio/drums01.mp3'],\n\t  sprite: {\n\t    clap: [0, 50],\n\t    kick: [50, 125],\n\t    low: [125, 160],\n\t    snare: [170, 190]\n\t  }\n\t});\n*/\n\n\tvar drumMaster = new Howl({\n\t  urls: ['audio/soundmix01.mp3'],\n\t  sprite: {\n\t    clap: [0, 300],\n\t    kick: [400, 300],\n\t    low: [1000, 300],\n\t    snare: [2600, 300]\n\t  }\n\t});\n\n\n/*\n\tvar drumMaster = new Howl({\n\t  urls: ['audio/tones-long.mp3'],\n\t  sprite: {\n\t    clap: [0, 300],\n\t    kick: [1000, 300],\n\t    low: [2000, 300],\n\t    snare: [3000, 300]\n\t  }\n\t});\n\t*/\n\n\t// shoot the laser!\n\tdrumMaster.play('kick');\n\n\t$('#clapBtn').on('click', function(){\n\t\t//$(\"body\").addClass('active');\n\t\tplayClap();\n\t});\n\t$('#kickBtn').on('click', function(){\n\t\tplayKick();\n\n\t});\n\t$('#lowBtn').on('click', function(){\n\t\tplayLow();\n\t});\n\t$('#snareBtn').on('click', function(){\n\t\tplaySnare();\n\t});\n\n\t$( \"#shakeBtn\" ).click(function() {\n\t\tif (ready == \"shake\" ){\n\t  \t\tstopShakeSound();\n\t\t}else{\n\t\t\tactivateShakeSound();\n\t\t}\n\t});\n\n\tfunction playClap(){\n\t\tdrumMaster.play('clap');\n\t\tvizEffect();\n\n\t}\n\tfunction playKick(){\n\t\tdrumMaster.play('kick');\n\t\tvizEffect();\n\n\t}\n\tfunction playLow(){\n\t\tdrumMaster.play('low');\n\t\tvizEffect();\n\n\t}\n\tfunction playSnare(){\n\t\tdrumMaster.play('snare');\n\t\tvizEffect();\n\n\t}\n\tfunction playLaser(){\n\t\tdrumMaster.play('laser');\n\t\tvizEffect();\n\n\t}\n\n\tfunction vizEffect(){\n\t\tUberVizMain.setBeat(Math.random()+.1);\n\t}\n\n\tfunction activateShakeSound(){\n\t\tready = 'shake';\n\t\t$('#shakeBtn').text('stop');\n\t\tinitShakeSound();\n\n\t}\n\n\tfunction stopShakeSound(){\n\t\tready = null;\n\t\t$('#shakeBtn').text('shake');\n\t\tmyShakeEvent.stop();\n\n\t}\n\n\n\tif (window.matchMedia(\"(min-width: 500px)\").matches) {\n\t/* the view port is at least 900 pixels wide */\n\t} else {\n\t\t//hide controls\n\t\t$('.container').hide();\n\t}\n\n\tfunction initShakeSound(){\n\t\t//create a new instance of shake.js.\n\t    myShakeEvent = new Shake({\n\t        threshold: 2,\n\t        timeout: 400\n\t    });\n\n\t    // start listening to device motion\n\t    myShakeEvent.start();\n\t    \n\t    \n\n\t    // register a shake event\n\t    window.addEventListener('shake', shakeEventDidOccur, false);\n\n\t    //shake event callback\n\t    function shakeEventDidOccur () {\n\n\t        //put your own code here etc.\n\t        shakeSound();\n\n\t        $(\"body\").addClass('active');\n\t        //setTimeout(stopSound, 100);\n\t        \n\t    }\n\t}\n\n\t function shakeSound(){\n    \tconsole.log('shaking');\n    //\t$('#status').text('shaking');\n    \tif (x>0){\n    \t\tplayClap();\n    \t}else {\n    \t\tplayKick();\n\n    \t}\n    /*\n    \n    \tif (x>0 && y>0){\n    \t\tplayClap();\n    \t}else if (x>0 && y<0){\n    \t\tplayKick();\n\n    \t}else if (x<0 && y>0){\n    \t\tplayLow();\n    \t}else (x<0 && y<0)\n    \t\tplaySnare();\n    \t}\n   */\n    \t/*\n    \tosc = context.createOscillator();\n\t\tosc.connect(context.destination);\n\t\tosc.start(context.currentTime);\n\t\t*/\n\n\t\tvizEffect();\n\t//\t$('#status').text('start');\n\t\t\n    }\n\n    function stopSound(){\n    \t//osc.stop();\n  \t\t//osc.disconnect();\n  \t//\t$('#status').text('stop');\n    }\n\n\n\t///////////////////////////////////////////////\n\n\n\n\n\tvar motionMultiplier = 30;\n\n\tvar center = {\n\t    x: $(window).width()/2,\n\t    y: $(window).height()/2\n\t}\n\n\tvar compassRotate = function(_a, _b, _g) {\n\t    $('.ball').css({\n\t        transform: 'rotateZ(' + _a + 'deg)'\n\t    });\n\t}\n\n\tvar moveBall = function(x, y, z) {\n\t    $('.ball').css({\n\t        top: Math.ceil(center.y + y * motionMultiplier),\n\t        left: Math.ceil(center.x + -1 * x * motionMultiplier)\n\t    });\n\t}\n\n\tcompassRotate(90, 45, 45);\n\tmoveBall(0, 0, 0);\n\n\tvar initOrientation = function() {\n\n\t    //Find our div containers in the DOM\n\t    var dataContainerOrientation = document.getElementById('dataContainerOrientation');\n\t    var dataContainerMotion = document.getElementById('dataContainerMotion');\n\n\t    //Check for support for DeviceOrientation event\n\t    if (window.DeviceOrientationEvent) {\n\t        window.addEventListener('deviceorientation', function(event) {\n\t            var alpha = event.alpha;\n\t            var beta = event.beta;\n\t            var gamma = event.gamma;\n\n\t            if (alpha != null || beta != null || gamma != null) {\n\t                dataContainerOrientation.innerHTML = 'alpha: ' + alpha + '<br/>beta: ' + beta + '<br />gamma: ' + gamma;\n\n\t                compassRotate(alpha, beta, gamma);\n\t            }\n\t        }, false);\n\t    }\n\n\t    // Check for support for DeviceMotion events\n\t    if (window.DeviceMotionEvent) {\n\t        window.addEventListener('devicemotion', function(event) {\n\t            x= Math.floor(event.accelerationIncludingGravity.x);\n\t            y = event.accelerationIncludingGravity.y;\n\t            var z = event.accelerationIncludingGravity.z;\n\t            var r = event.rotationRate;\n\t            var html = 'Acceleration:<br />';\n\t            html += 'x: ' + x + '<br />y: ' + y + '<br/>z: ' + z + '<br />';\n\t            html += 'Rotation rate:<br />';\n\t            if (r != null) html += 'alpha: ' + r.alpha + '<br />beta: ' + r.beta + '<br/>gamma: ' + r.gamma + '<br />';\n\t            dataContainerMotion.innerHTML = html;\n\n\t            moveBall(x, y, z);\n\t            if (ready=='tilt') {\n\t            \tvar rand = (x*1000)/5;\n\t            \tosc.detune.value = rand;\n\t            \t $('#status').html(rand);\n\t            \tconsole.log('ready');\n\t            }\n\t\t   \t\t\n\n\n\t            \n\t        });\n\t    }\n\n\t}\n\n\tinitOrientation();\n\n\n\n});"]}