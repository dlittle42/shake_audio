"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),$(document).ready(function(){function a(){window.orientation%180==0}function b(){o.play("clap")}function c(){o.play("kick")}function d(){o.play("low")}function e(){o.play("snare")}function f(){v="tilt",console.log("tilt sound"),$("#tiltBtn").text("stop"),window.addEventListener("mousedown",l),window.addEventListener("mouseup",n),l()}function g(){v=null,$("#tiltBtn").text("tilt"),n(),window.removeEventListener("mousedown",l),window.removeEventListener("mouseup",n)}function h(){v="shake",$("#shakeBtn").text("stop"),j()}function i(){v=null,$("#shakeBtn").text("shake"),u.stop()}function j(){function a(){m(),$("body").addClass("active")}u=new Shake({threshold:2,timeout:400}),u.start(),window.addEventListener("shake",a,!1)}function k(){p=new(window.AudioContext||window.webkitAudioContext),r=p.createGain(),r.gain.value=1,q=p.createOscillator(),q.type="sine",q.frequency.value=440,q.detune.value=0,q.connect(r),$("#status").html("init")}function l(){console.log("test"),q=context.createOscillator(),q.connect(context.destination),q.start(context.currentTime),$("#status").html("start")}function m(){console.log("shaking"),s>0?b():c(),$("#status").html("start")}function n(){$("#status").html("stop")}window.onorientationchange=a,window.setTimeout(a,0);var o=new Howl({urls:["audio/drums01.mp3"],sprite:{clap:[0,50],kick:[50,125],low:[125,160],snare:[170,190]}});o.play("laser"),$("#lowBtn").on("click",function(){$("body").addClass("active"),b()}),$("#kickBtn").on("click",function(){c()}),$("#lowBtn").on("click",function(){d()}),$("#snareBtn").on("click",function(){e()}),$("body").on("animationend MSAnimationEnd webkitAnimationEnd oAnimationEnd",function(){$(this).removeClass("active")});var p,q,r,s,t,u,v=null;console.log("loaded"),k(),$("#tiltBtn").click(function(){"tilt"==v?g():f()}),$("#shakeBtn").click(function(){"shake"==v?i():h()});var w=30,x={x:$(window).width()/2,y:$(window).height()/2},y=function(a){$(".ball").css({transform:"rotateZ("+a+"deg)"})},z=function(a,b){$(".ball").css({top:Math.ceil(x.y+b*w),left:Math.ceil(x.x+-1*a*w)})};y(90,45,45),z(0,0,0);var A=function(){var a=document.getElementById("dataContainerOrientation"),b=document.getElementById("dataContainerMotion");window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(b){var c=b.alpha,d=b.beta,e=b.gamma;(null!=c||null!=d||null!=e)&&(a.innerHTML="alpha: "+c+"<br/>beta: "+d+"<br />gamma: "+e,y(c,d,e))},!1),window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(a){s=Math.floor(a.accelerationIncludingGravity.x),t=a.accelerationIncludingGravity.y;var c=a.accelerationIncludingGravity.z,d=a.rotationRate,e="Acceleration:<br />";if(e+="x: "+s+"<br />y: "+t+"<br/>z: "+c+"<br />",e+="Rotation rate:<br />",null!=d&&(e+="alpha: "+d.alpha+"<br />beta: "+d.beta+"<br/>gamma: "+d.gamma+"<br />"),b.innerHTML=e,z(s,t,c),"tilt"==v){var f=1e3*s/5;q.detune.value=f,$("#status").html(f),console.log("ready")}})};A()});