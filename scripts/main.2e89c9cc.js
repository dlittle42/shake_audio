"addEventListener"in document&&document.addEventListener("DOMContentLoaded",function(){FastClick.attach(document.body)},!1),$(document).ready(function(){function a(){n.play("clap")}function b(){n.play("kick")}function c(){n.play("low")}function d(){n.play("snare")}function e(){u="tilt",console.log("tilt sound"),$("#tiltBtn").text("stop"),window.addEventListener("mousedown",k),window.addEventListener("mouseup",m),k()}function f(){u=null,$("#tiltBtn").text("tilt"),m(),window.removeEventListener("mousedown",k),window.removeEventListener("mouseup",m)}function g(){u="shake",$("#shakeBtn").text("stop"),i()}function h(){u=null,$("#shakeBtn").text("shake"),t.stop()}function i(){function a(){l(),$("body").addClass("active")}t=new Shake({threshold:2,timeout:400}),t.start(),window.addEventListener("shake",a,!1)}function j(){o=new(window.AudioContext||window.webkitAudioContext),q=o.createGain(),q.gain.value=1,p=o.createOscillator(),p.type="sine",p.frequency.value=440,p.detune.value=0,p.connect(q),$("#status").html("init")}function k(){console.log("test"),p=context.createOscillator(),p.connect(context.destination),p.start(context.currentTime),$("#status").html("start")}function l(){console.log("shaking"),r>0?a():b(),$("#status").html("start")}function m(){$("#status").html("stop")}var n=new Howl({urls:["audio/drums01.mp3"],sprite:{clap:[0,50],kick:[50,125],low:[125,160],snare:[170,190]}});n.play("laser"),$("#lowBtn").on("click",function(){$("body").addClass("active"),a()}),$("#kickBtn").on("click",function(){b()}),$("#lowBtn").on("click",function(){c()}),$("#snareBtn").on("click",function(){d()}),$("body").on("animationend MSAnimationEnd webkitAnimationEnd oAnimationEnd",function(){$(this).removeClass("active")});var o,p,q,r,s,t,u=null;console.log("loaded"),j(),$("#tiltBtn").click(function(){"tilt"==u?f():e()}),$("#shakeBtn").click(function(){"shake"==u?h():g()});var v=30,w={x:$(window).width()/2,y:$(window).height()/2},x=function(a){$(".ball").css({transform:"rotateZ("+a+"deg)"})},y=function(a,b){$(".ball").css({top:Math.ceil(w.y+b*v),left:Math.ceil(w.x+-1*a*v)})};x(90,45,45),y(0,0,0);var z=function(){var a=document.getElementById("dataContainerOrientation"),b=document.getElementById("dataContainerMotion");window.DeviceOrientationEvent&&window.addEventListener("deviceorientation",function(b){var c=b.alpha,d=b.beta,e=b.gamma;(null!=c||null!=d||null!=e)&&(a.innerHTML="alpha: "+c+"<br/>beta: "+d+"<br />gamma: "+e,x(c,d,e))},!1),window.DeviceMotionEvent&&window.addEventListener("devicemotion",function(a){r=Math.floor(a.accelerationIncludingGravity.x),s=a.accelerationIncludingGravity.y;var c=a.accelerationIncludingGravity.z,d=a.rotationRate,e="Acceleration:<br />";if(e+="x: "+r+"<br />y: "+s+"<br/>z: "+c+"<br />",e+="Rotation rate:<br />",null!=d&&(e+="alpha: "+d.alpha+"<br />beta: "+d.beta+"<br/>gamma: "+d.gamma+"<br />"),b.innerHTML=e,y(r,s,c),"tilt"==u){var f=1e3*r/5;p.detune.value=f,$("#status").html(f),console.log("ready")}})};z()});